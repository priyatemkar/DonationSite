"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[77341],{237666:(e,t,n)=>{var r=n(667294),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useSyncExternalStore,s=r.useRef,a=r.useEffect,u=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,d){var c=s(null);if(null===c.current){var m={hasValue:!1,value:null};c.current=m}else m=c.current;var f=o(e,(c=u(function(){function e(e){if(!a){if(a=!0,o=e,e=r(e),void 0!==d&&m.hasValue){var t=m.value;if(d(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var n=r(e);return void 0!==d&&d(t,n)?(o=e,t):(o=e,s=n)}var o,s,a=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,r,d]))[0],c[1]);return a(function(){m.hasValue=!0,m.value=f},[f]),l(f),f}},331103:(e,t,n)=>{e.exports=n(237666)},623258:(e,t,n)=>{n.d(t,{$A:()=>f,N0:()=>g,N3:()=>p,VK:()=>m,_J:()=>h,mW:()=>c});var r=n(667294),i=n(316886),o=n(992114),s=n(785893);let a={},u={},l=!1,d=(0,r.createContext)({setMetric:()=>void 0,getMetricForComponent:()=>void 0,getMetricsForPath:()=>void 0,setRmaData:()=>void 0});function c({children:e}){let t=(0,r.useCallback)((e,t,n)=>{a[e]||(a[e]={}),a[e][t]=n},[]),n=(0,r.useCallback)((e,t)=>a[e]?.[t],[]),o=(0,r.useCallback)(e=>a[e],[]),c=(0,r.useCallback)(({id:e,path:t,fragmentName:n,executionTime:r,newData:o})=>{if(l)return;let s=`${n}.${e}`;u[t]||(u[t]={}),u[t][s]||(u[t][s]={totalRenderTime:0,previousData:{},renderCount:0,resultUpdatedCount:0});let a=!(0,i.ZP)(o,u[t][s].previousData);u[t][s].totalRenderTime+=r,u[t][s].renderCount+=1,u[t][s].resultUpdatedCount+=+!!a,u[t][s].previousData=o},[]),m=(0,r.useMemo)(()=>({setMetric:t,getMetricForComponent:n,getMetricsForPath:o,setRmaData:c}),[t,n,o,c]);return(0,s.jsx)(d,{value:m,children:e})}function m(){return(0,r.use)(d)}function f(e){return a[e]}function p(e){return["www/index.js","www/homefeed.js"].includes(e)}function h(e){let t=u[e],n={};l=!0,t&&Object.keys(t).length&&p(e)&&Object.entries(t).forEach(([e,t])=>{let[r]=e.split(".");r&&!n[r]&&(n[r]=!0,(0,o.QX)(`render_stats.rma.${r}.renderCount`,t.renderCount,{sampleRate:1}),(0,o.QX)(`render_stats.rma.${r}.resultUpdatedCount`,t.resultUpdatedCount,{sampleRate:1}),(0,o.LY)(`render_stats.rma.${r}`,t.totalRenderTime,{sampleRate:1}))})}function g(){a={},u={},l=!1}},316886:(e,t,n)=>{function r(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1)if(!o(e[r],t[r],n+1))return!1;return!0}function i(e,t,n){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(!(r in t)||!o(e[r],t[r],n+1))return!1;return!0}function o(e,t,n){if(n>=1e3)return!1;if(e===t)return!0;if(null==e||null==t||"object"!=typeof e&&"object"!=typeof t)return e!=e&&t!=t;let o=Object.prototype.toString.call(e);if(o!==Object.prototype.toString.call(t))return!1;switch(o){case"[object Array]":return r(e,t,n);case"[object Set]":return r(Array.from(e).sort(),Array.from(t).sort(),n);case"[object Object]":case"[object Arguments]":return i(e,t,n);case"[object Map]":return i(Object.fromEntries(e),Object.fromEntries(t),n);case"[object RegExp]":return e+""==t+"";case"[object Error]":return e.name===t.name&&e.message===t.message;default:return!1}}function s(e,t){return o(e,t,0)}n.d(t,{Z1:()=>i,ZP:()=>s,qP:()=>r})},756064:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(667294),i=n(295666),o=n(992114);function s(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends r.Component{constructor(...e){super(...e),s(this,"state",{error:null,info:null}),s(this,"resetError",()=>{this.setState({error:null,info:null})})}componentDidCatch(e,t){try{let{name:t}=this.props,n=this.props.type||"secondary";(0,i.T)({extraData:e.extraData??{},errorBoundary:t,errorBoundaryType:n,message:e.message,name:e.name,stack:e.stack}),(0,o.nP)("react.error_boundary",{sampleRate:.1,tags:{component:void 0,name:this.props.name}})}catch(e){(0,o.nP)("react.error_boundary.error",{sampleRate:1,tags:{name:this.props.name}})}this.setState({error:e,info:t})}render(){let{renderErrorState:e}=this.props,{error:t,info:n}=this.state;return t&&n?e?e({error:t,info:n,resetError:this.resetError}):null:this.props.children}}},56063:(e,t,n)=>{n.d(t,{$H:()=>a,$q:()=>b,$u:()=>i,Az:()=>c,Cw:()=>S,D6:()=>d,GZ:()=>C,KN:()=>E,Ke:()=>w,Lo:()=>o,P2:()=>g,TS:()=>L,Wv:()=>_,ZZ:()=>f,g5:()=>p,jC:()=>u,lX:()=>h,oX:()=>v,qG:()=>y,tG:()=>s,yF:()=>r,yc:()=>m,yt:()=>l});let r=236,i=270,o=157.33333333333334,s=175,a=24,u=4,l=8,d=2,c=8,m=2,f=14,p=16,h=16,g=24,v=16,y=-1,w=2,b=(e=!1,t=!1)=>e?t?h:12:g,_=({defaultItemWidth:e,contentVisibleItemCount:t,gap:n,moduleWidth:r})=>t||r?(r-((Math.ceil(t)+1)*n+8))/t:e,E=(e,t,n,r,i=f)=>{let o=e+i;return`
@media (min-width: ${t*o}px) and (max-width: ${(n+1)*o-1}px) {
  ${r}
}
`},L=(e,t,n)=>{let i=n?3:2,o=t?5:i,a=t?r:s,u=t?v:l,d=a*o+u*o-(t||!t&&n?12:6);if(!e)return d;for(let t=o;t>=2;t-=1)if(e>d)break;else d=a*t+u*t;return d},C=e=>{let t=Object.values(e.videos?.video_list??{}).find(e=>"number"==typeof e.width&&"number"==typeof e.height);return t?{width:t.width,height:t.height}:{width:0,height:0}},S=e=>!!(e&&"is_premiere"in e&&e.is_premiere&&"videos"in e&&e.videos)},221097:(e,t,n)=>{function r(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>s});let i=new class{constructor(){r(this,"onResumeListeners",[]),r(this,"onPauseListeners",[]),r(this,"inExp",!1),r(this,"windowInFocus",!0)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter(t=>t!==e)}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter(t=>t!==e)}},o=e=>{if(e.isHidden){let{reason:t}=e;i.windowInFocus=!1,i.onPauseListeners.forEach(e=>e(t))}else i.windowInFocus=!0,i.onResumeListeners.forEach(e=>e())};setTimeout(()=>{window.addEventListener("beforeunload",()=>o({isHidden:!0,reason:"beforeunload"})),window.addEventListener("focus",()=>o({isHidden:!1})),window.addEventListener("blur",()=>o({isHidden:!0,reason:"blur"})),window.addEventListener("pageshow",()=>o({isHidden:!1})),window.addEventListener("pagehide",()=>o({isHidden:!0,reason:"pagehide"})),void 0!==document.hidden?document.addEventListener("visibilitychange",()=>o(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",()=>o(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1)},0);let s=i},849289:(e,t,n)=>{n.d(t,{Z:()=>r});let r=(0,n(667294).createContext)(null)},298568:(e,t,n)=>{n.d(t,{A:()=>i,S:()=>r});let{Provider:r,getMaybe:i}=(0,n(218291).Z)("pwtSurfaceContext")},762422:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(300509),i=n(667294),o=n(17433),s=n(298568),a=n(657742),u=n(647466);function l({children:e,isAtEndOfFeed:t,pinData:n,itemCount:l,includeBackgroundImages:d=!1,includeVideos:c=!1,includeSections:m=!1,isPlaceholderGrid:f,stopwatchSetVisuallyCompleteResult:p,stopwatchContext:h}){let{isAuthenticated:g}=(0,u.bC)(),v=(0,a.Z)()?.isAuthenticated||g;v||(m=!0),(0,r.Z)({pinData:n,isAtEndOfFeed:t,includeBackgroundImages:d,includeVideos:c,includeSections:m,isPlaceholderGrid:f,stopwatchSetVisuallyCompleteResult:p,isAuth:v,stopwatchContext:h});let y=(0,s.A)(),w=(0,i.useRef)(null);return(0,i.useEffect)(()=>{l!==w.current&&(w.current=l,y&&(0,o.ZP)(o.at))},[!!y,l]),e}},482535:(e,t,n)=>{n.d(t,{F9:()=>l,LM:()=>u,VZ:()=>o,cQ:()=>d,rZ:()=>s});var r=n(719413),i=n(535768);let o=()=>"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&!!document.querySelector&&!!document.querySelectorAll,s=e=>e instanceof HTMLDivElement||e instanceof HTMLVideoElement?e.getBoundingClientRect():e.parentElement instanceof HTMLElement?e.parentElement.getBoundingClientRect():null,a=e=>{if(e instanceof HTMLImageElement)return e.src;if(e instanceof HTMLVideoElement)return e.attributes.poster.value;let t=((e.style||{}).backgroundImage||"").match(/^url\(["'](.*)["']\)$/);return t&&t[1]||null},u=()=>document.querySelector?document.querySelectorAll(r.wc).length:((0,i.H)("missing_document_query_selector"),0),l=()=>{let e=(()=>{if(!document.querySelector)return(0,i.H)("missing_document_query_selector"),null;let e=document.querySelectorAll(r.wc);return e[e.length-1]||null})();if(!e)return!1;let t=window.innerHeight||0,n=window.pageYOffset||0;return e.getBoundingClientRect().top+n>=t},d=(e,t,n)=>{if(!document.querySelector)return(0,i.H)("missing_document_query_selector"),[];let o={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},u=[r.Wf,...e?[r.fF]:[],...t?[r.$N]:[]].join(","),l=[...document.querySelectorAll(u)];if(n){let e=[...document.querySelectorAll('div[data-test-id="board-section"]')],t=e=>{let n=[...e.children];!n.length&&e.style.backgroundImage?l.push(e):n.length&&n.forEach(e=>{t(e)})};e.forEach(e=>{t(e)})}return l.reduce((e,n)=>{if((n instanceof HTMLImageElement||n instanceof HTMLDivElement||n instanceof HTMLVideoElement&&t)&&((e,t)=>{let n=s(e);if(!n)return(0,i.H)("missing_client_rect"),!1;if(n.width<70&&n.height<70){if(e instanceof HTMLImageElement)return!1;let t=a(e);if(t?.endsWith("svg"))return!1}return(({top:e,height:t},{foldY:n,pageYOffset:r})=>{let i=e+r;if(i>=n)return!1;let o=Math.min(t,n-i);return o>.5*t||o>.2*n})(n,t)})(n,o)){let t=a(n);if(t){let r=(t||"").replace(/.*\//,"");return e.concat([{element:n,fileName:r}])}}return e},[])}},719413:(e,t,n)=>{n.d(t,{$N:()=>u,Kb:()=>r,Wf:()=>s,fF:()=>a,wc:()=>o});let r="pwt-grid-item",i=['div[data-grid-item="true"]',"div.Grid__Item",`div[data-test-id="${r}"]`],o=i.join(","),s=i.map(e=>`${e} img`).join(","),a=i.map(e=>`${e} div[style*=background-image]`).join(","),u=i.map(e=>`${e} video`).join(",")},300509:(e,t,n)=>{n.d(t,{Z:()=>v,v:()=>g});var r=n(667294),i=n(967312),o=n(582082),s=n(150739),a=n(482535),u=n(535768),l=n(17433),d=n(298568),c=n(331118),m=n(116657),f=n(481714),p=n(992114);let h=(0,s.XV)("GridProfiler"),g=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,a.VZ)();function v({isAtEndOfFeed:e,pinData:t,includeBackgroundImages:n,includeVideos:g=!1,includeSections:v,isPlaceholderGrid:y,stopwatchSetVisuallyCompleteResult:w,stopwatchContext:b,isAuth:_}){let E=(0,d.A)(),L=E?.getId()||(0,m.P9)(),C=E?.setVisuallyCompleteResult,[S,j]=(0,r.useState)({status:"DISABLED"}),A=(0,i.F)();(0,r.useEffect)(()=>{j({status:"LAYOUT",failedCount:0,numOfItemsChecked:0})},[L]),(0,r.useEffect)(()=>{if(h("new status",S),"LAYOUT"===S.status){let e=((e,t)=>{let n=()=>{window.removeEventListener(e,n),t()};return window.addEventListener(e,n),()=>window.removeEventListener(e,n)})("scroll",()=>{(0,l.ZP)("scrollDuringLayout")});return()=>{e()}}return()=>{}},[S.status]),(0,f.Z)(()=>{let r="unknown",i="unknown",l=()=>{},d=e=>{E?E.abort(e):b?.abort()};if(E){let{getMetricId:e}=E,t=e();i=t.surface,r=(0,o.KJ)(t),l=E.addBinaryAnnotation}else i="stopwatch",r=`${i}_${b?.name}`,b?.addBinaryAnnotation&&(l=b?.addBinaryAnnotation);let f=(0,a.cQ)(n,g,v);if(y)return void h("bypassing PWT run due to skeleton pin grid");switch(S.status){case"LAYOUT":{let t=((e,t)=>{if(!t){let t=(0,a.LM)();if(t===e)return h("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,a.F9)())return h("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}})(S.numOfItemsChecked,e);t.complete?j({status:"TIMING",failedCount:0,pinElements:f}):500*S.failedCount>6e4?((0,u.A9)(`images.${r}.visuallyComplete.maxLayoutAttempt`),d("visuallyComplete_layoutTimeout"),(0,m.JG)("visuallyComplete_layoutTimeout"),j({status:"DISABLED"})):j({...S,failedCount:S.failedCount+1,numOfItemsChecked:t.numOfItemsChecked});break}case"TIMING":{let e=(0,c.Cg)(),n=S.pinElements.length,o=[],a=0,f=0,g=0,v=1/0,y=0;if(S.pinElements.forEach(({element:t,fileName:n})=>{let r=e.find(e=>e.name.endsWith(n));r?r.responseEnd?(o.push(r),(0,s.v5)(t,"green"),"search"===i&&(v=Math.min(v,r.requestStart),y=Math.max(y,r.responseEnd))):(g+=1,(0,s.v5)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(f+=1,(0,s.v5)(t,"red")):(a+=1,(0,s.v5)(t,"greenyellow"))}),a||g)100*S.failedCount>6e4?((0,u.A9)(`images.${r}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:n,incompleteCount:a,noTimingCount:f,noTimingResponseEndCount:g}}),d("visuallyComplete_timingTimeout"),(0,m.JG)("visuallyComplete_timingTimeout"),j({status:"DISABLED"})):j({...S,failedCount:S.failedCount+1});else{if(h(`All ${o.length} images are fetched`),t&&t.length){var L,T;let e,n,o,s,a,d=(L=t,T=S.pinElements,e=0,n=0,o=0,s=0,a=0,L=L.filter(e=>"pin"===e.type),T.forEach((t,r)=>{let i,u=t.fileName.split(".")[0];i=L[r],u!==i?.image_signature&&(i=L.find(e=>u===e?.image_signature)),void 0===i?a+=1:i.is_promoted||i.recommendation_reason?.reason==="PROMOTED_PIN"||i?.promoter?.length?o+=1:null!==i.story_pin_data_id&&void 0!==i.story_pin_data_id?e+=1:i?.videos?.video_list?n+=1:s+=1}),{storyPinCount:e,videoCount:n,adCount:o,imageCount:s,unknownCount:a});if(Object.entries(d).forEach(([e,t])=>{l(e,t,"I16"),(0,m.XJ)(e,t,"I16")}),(0,u.A9)(`${r}.pinTypes`,{tags:d}),"search"===i){let e=y-v;t[0].display_options?.num_columns_requested===0?(0,p.LY)("full_width_story_image_fetch_time_true",e,{sampleRate:1}):(0,p.LY)("full_width_story_image_fetch_time_false",e,{sampleRate:.05})}}if(_&&"search"===i){let{group:e}=A.checkExperiment("dweb_grid_loading_state");e&&(0,p.S0)("webapp.gridVisuallyComplete.loadingState",n,{sampleRate:1,tags:{group:e}})}(({imageTimings:e})=>{w&&w(),C&&C({imageTimings:e}),(0,m.cB)(e)})({imageTimings:o}),j({status:"DISABLED"}),(0,u.A9)(`images.${r}.visuallyComplete.complete`,{tags:{totalImageCount:n,noTimingCount:f}})}}}},"LAYOUT"===S.status&&500||"TIMING"===S.status&&100||null)}},657742:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(667294),i=n(849289);function o(){return(0,r.useContext)(i.Z)}},481714:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(667294);let i=(e,t)=>{let n=(0,r.useRef)(()=>{});(0,r.useEffect)(()=>{n.current=e},[e]),(0,r.useEffect)(()=>{if(null===t)return()=>{};let e=setInterval(()=>n.current(),t);return()=>clearInterval(e)},[t])}},276162:(e,t,n)=>{function r(){return{}}n.d(t,{kr:()=>r}),n.g.__AsyncLocalStorage__&&new n.g.__AsyncLocalStorage__}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/77341-c29ffc1b9c2da8e9.mjs.map